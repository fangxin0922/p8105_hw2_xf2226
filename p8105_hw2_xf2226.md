p8105\_hw2\_xf2226
================
Xin Fang
10/3/2021

# problem 1

## Read in and clean Mr. Trash Wheel sheet

``` r
mr_trash_wheel_df <- readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = 1, range = cellranger::cell_cols("A:N"), skip = 1) %>% # specified the sheet in the Excel file, using sheet = 1; omited non-data entries, using range = cellranger::cell_cols("A:N") and skip = 1
  janitor::clean_names() %>% #use reasonable variable names
  filter(!is.na(dumpster)) #omit rows that do not include dumpster-specific data

mr_trash_wheel_df$sports_balls <- round(pull(mr_trash_wheel_df, sports_balls), 0) #round the number of sports balls to the nearest integer
```

## Read and clean precipitation data for 2018 and 2019

``` r
sheets <- readxl::excel_sheets("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx") #read in sheets

precipitation_2018_2019 <- do.call(rbind, lapply(sheets[4:5], function(X) 
        transform(readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = X, skip = 1), sheetname = X))) #rbind the two seperate sheets and add a column containing the sheetnames

precipitation_2018_2019 <- precipitation_2018_2019 %>% 
  na.omit(Total) %>% #omit rows without precipitation data
  mutate(Year = substr(sheetname, 1, 4), Month = month.name[Month]) %>%  #add a variable for year and convert month to a character variable
  select(Year, Month, Total) %>% 
  as_tibble()
```

There are 344 observations in the Mr. Trash Wheel dataset and 18
observations in the precipitation dataset for year 2018 and 2019.

Some of the key variables in the Mr. Trash Wheel dataset are:  
`year` and `month` represents the year and month of trash collection  
`dumpster` column includes specific dumpster number  
`sports_balls` column includes the number of sports balls collected in
Mr. Trash Wheel on the given specific date and dumpster. The mean number
of sports balls is 11.8110465. And the median number of sports balls in
the dumpster in 2019 specifically is 8.5  
`weight_tons` represents the weight of trash in tons collected by
Mr. Trash Wheel on a given dumpster and date  

Some of the key variables in the precipitation dataset for year 2018 and
2019 are:  
`Year` represents the year of precipitation measuremens  
`Month` is the month of precipitation measurement  
`Total` column includes the total precipitation for the year-month  

The total precipitation measured in 2018 is 70.33

# Problem 2

## read and clean pols\_month

``` r
rm(list = ls()) #clean environment to start a new problem

pols_month <- read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% #load pols_month dataset
  janitor::clean_names() 
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
class(pols_month)
```

    ## [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"

``` r
pols_month <- pols_month %>%
  separate(mon, sep = "-", into = c("year", "month","day")) %>% #Use separate() to break up the variable mon into integer variables year, month, and day
  mutate(
    year = as.integer(year), 
    month = as.integer(month), 
    day = as.integer(day),
    month = month.name[month]) %>% 
  pivot_longer(c("prez_gop","prez_dem"), #a president variable taking values gop and dem
    names_to = "president",
    values_to = "president_boolean",
    names_prefix = "prez_"
  ) %>% 
  filter(president_boolean != 0) %>% 
  select(-c(president_boolean, day)) #remove the day variable
```
