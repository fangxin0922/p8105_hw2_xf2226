---
title: "p8105_hw2_xf2226"
author: "Xin Fang"
date: "10/3/2021"
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
```

# problem 1 

## Read in and clean Mr. Trash Wheel sheet
```{r load and clean wheel data, warning=FALSE}
mr_trash_wheel_df <- readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = 1, range = cellranger::cell_cols("A:N"), skip = 1) %>% # specified the sheet in the Excel file, using sheet = 1; omited non-data entries, using range = cellranger::cell_cols("A:N") and skip = 1
  janitor::clean_names() %>% #use reasonable variable names
  filter(!is.na(dumpster)) #omit rows that do not include dumpster-specific data

mr_trash_wheel_df$sports_balls <- round(pull(mr_trash_wheel_df, sports_balls), 0) #round the number of sports balls to the nearest integer
```

## Read and clean precipitation data for 2018 and 2019

```{r Read and clean precipitation data for 2018 and 2019}
sheets <- readxl::excel_sheets("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx") #read in sheets

precipitation_2018_2019 <- do.call(rbind, lapply(sheets[4:5], function(X) 
        transform(readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = X, skip = 1), sheetname = X))) #rbind the two seperate sheets and add a column containing the sheetnames

precipitation_2018_2019 <- precipitation_2018_2019 %>% 
  na.omit(Total) %>% #omit rows without precipitation data
  mutate(Year = substr(sheetname, 1, 4), Month = month.name[Month]) %>%  #add a variable for year and convert month to a character variable
  select(Year, Month, Total) %>% 
  as_tibble()
```

There are `r nrow(mr_trash_wheel_df)` observations in the Mr. Trash Wheel dataset and `r nrow(precipitation_2018_2019)` observations in the precipitation dataset for year 2018 and 2019. 

Some of the key variables in the Mr. Trash Wheel dataset are: \
`year`  and `month` represents the year and month of trash collection\
`dumpster` column includes specific dumpster number \
`sports_balls` column includes the number of sports balls collected in Mr. Trash Wheel on the given specific date and dumpster. The mean number of sports balls is `r mean(pull(filter(mr_trash_wheel_df), sports_balls))`. And the median number of sports balls in the dumpster in 2019 specifically is `r median (pull(filter(mr_trash_wheel_df, year == 2019), sports_balls))`\
`weight_tons` represents the weight of trash in tons collected by Mr. Trash Wheel on a given dumpster and date \

Some of the key variables in the precipitation dataset for year 2018 and 2019 are:\
`Year` represents the year of precipitation measuremens\
`Month` is the month of precipitation measurement\
`Total` column includes the total precipitation for the year-month\

The total precipitation measured in 2018 is `r sum(pull(filter(precipitation_2018_2019, Year == 2018), Total))` 

```{r}

```

